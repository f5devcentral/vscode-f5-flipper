# Section 1.3: Persistence Sessions
# Tests: lb vserver persistence types
# Note: timeout max is 1440 minutes (24 hours)

# Backend server and service group
add server persist_server 10.10.10.20
add serviceGroup sg_persist HTTP
bind serviceGroup sg_persist persist_server 80

# Source IP Persistence (60 min timeout)
add lb vserver vs_sourceip HTTP 10.1.1.101 80 -persistenceType SOURCEIP -timeout 60
bind lb vserver vs_sourceip sg_persist

# Cookie Persistence (120 min timeout)
add lb vserver vs_cookie HTTP 10.1.1.102 80 -persistenceType COOKIEINSERT -timeout 120 -cookieName NSPERSIST
bind lb vserver vs_cookie sg_persist

# SSL Session Persistence (30 min timeout)
add lb vserver vs_sslsession SSL 10.1.1.103 443 -persistenceType SSLSESSION -timeout 30
bind lb vserver vs_sslsession sg_persist

# URL Passive Persistence
add lb vserver vs_urlpassive HTTP 10.1.1.104 80 -persistenceType URLPASSIVE
bind lb vserver vs_urlpassive sg_persist

# Custom Server ID Persistence
add lb vserver vs_customsid HTTP 10.1.1.105 80 -persistenceType CUSTOMSERVERID
bind lb vserver vs_customsid sg_persist
