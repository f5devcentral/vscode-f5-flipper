# Section 1.2: TCP/HTTP/SSL/DNS Profiles
# Tests: ns tcpProfile, ns httpProfile, ssl profile, dns profile

# TCP Profile
add ns tcpProfile tcp_prof_custom -WS ENABLED -SACK ENABLED -nagle ENABLED -mss 1460

# HTTP Profile
add ns httpProfile http_prof_custom -dropInvalReqs ENABLED -markHttp09Inval ENABLED

# SSL Profile (frontend)
add ssl profile ssl_prof_frontend -ssl3 DISABLED -tls1 DISABLED -tls11 DISABLED -tls12 ENABLED -tls13 ENABLED

# SSL Profile (backend)
add ssl profile ssl_prof_backend -sslProfileType BackEnd

# DNS Profile
add dns profile dns_prof_custom -dnsQueryLogging ENABLED

# LB vserver with profiles applied
add server backend_server 10.10.10.10
add serviceGroup sg_web HTTP
bind serviceGroup sg_web backend_server 80
add lb vserver web_vs HTTP 10.1.1.100 80 -httpProfileName http_prof_custom -tcpProfileName tcp_prof_custom
bind lb vserver web_vs sg_web
